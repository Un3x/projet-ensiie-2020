<!DOCTYPE HTML>
<?php

include '../src/User.php';
include '../src/UserRepository.php';
include '../src/Aliment.php';
include '../src/AlimentRepository.php';
include '../src/Recette.php';
include '../src/RecetteRepository.php';
include '../src/Factory/DbAdaperFactory.php';

$dbAdaper = (new DbAdaperFactory())->createService();
$userRepository = new \User\UserRepository($dbAdaper);
$users = $userRepository->fetchAll();
$alimentRepository = new \Aliment\AlimentRepository($dbAdaper);
$aliments = $alimentRepository->fetchall();
$recetteRepository = new \Recette\RecetteRepository($dbAdaper);
$recette = $recetteRepository->fetchall();
session_start();

?>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>EpicEvry</title>

    <meta name="description" content="Projet web Ensiie">
    <meta name="author" content="Us">
    <?php include "./css_head.html" ?>
</head>

	<style>
		h1 {color: #26272B; text-align : center;}
		th {color : #BECFBD; text-align: center;}
		td {color : #FFFFFF; text-align: center; }
		p {color : #FFFFFF; }
		#bouton {color : #FFFACD; font-weight : bold;}
		button {background-color : transparent; border : none;}
	</style> 

<body style="background-color: #677179">
<?php include "./header.html" ?>
</br>
</br>

<?php $recette = $recetteRepository->fetchRecette($_POST['recette_id']); ?>

<?php if (empty($recette)):
$erreur="recetteUnknown";
header("Location: index.php?erreur={$erreur}");
endif ?>
<?php $auteurInfos = $recetteRepository->fetchInfosAuteur($recette->getId_recette()); ?>
